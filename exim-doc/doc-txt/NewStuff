$Cambridge: exim/exim-doc/doc-txt/NewStuff,v 1.112 2006/10/02 13:38:18 ph10 Exp $

New Features in Exim
--------------------

This file contains descriptions of new features that have been added to Exim.
Before a formal release, there may be quite a lot of detail so that people can
test from the snapshots or the CVS before the documentation is updated. Once
the documentation is updated, this file is reduced to a short list.


Version 4.64
------------

1. ACL variables can now be given arbitrary names, as long as they start with
   "acl_c" or "acl_m" (for connection variables and message variables), are
   at least six characters long, with the sixth character being either a digit
   or an underscore. The rest of the name can contain alphanumeric characters
   and underscores. This is a compatible change because the old set of
   variables such as acl_m12 are a subset of the allowed names. There may now
   be any number of ACL variables. For example:

     set acl_c13   = value for original ACL variable
     set acl_c13b  = whatever
     set acl_m_foo = something

   What happens if a syntactically valid but undefined ACL variable is
   referenced depends on the setting of the strict_acl_vars option. If it is
   false (the default), an empty string is substituted; if it is true, an error
   is generated. This affects all ACL variables, including the "old" ones such
   as acl_c4. (Previously there wasn't the concept of an undefined ACL
   variable.)

   The implementation has been done in such a way that spool files containing
   ACL variable settings written by previous releases of Exim are compatible
   and can be read by the new release. If only the original numeric names are
   used, spool files written by the new release can be read by earlier
   releases.

2. There is a new ACL modifier called log_reject_target. It makes it possible
   to specify which logs are used for messages about ACL rejections. Its
   argument is a list of words which can be "main", "reject", or "panic". The
   default is "main:reject". The list may be empty, in which case a rejection
   is not logged at all. For example, this ACL fragment writes no logging
   information when access is denied:

     deny <some conditions>
          log_reject_target =

   The modifier can be used in SMTP and non-SMTP ACLs. It applies to both
   permanent and temporary rejections.

3. There is a new authenticator called "dovecot". This is an interface to the
   authentication facility of the Dovecot POP/IMAP server, which can support a
   number of authentication methods. If you are using Dovecot to authenticate
   POP/IMAP clients, it might be helpful to use the same mechanisms for SMTP
   authentication. This is a server authenticator only. The only option is
   server_socket, which must specify the socket which is the interface to
   Dovecot authentication. The public_name option must specify an
   authentication mechanism that Dovecot is configured to support. You can have
   several authenticators for different mechanisms. For example:

     dovecot_plain:
       driver = PLAIN
       server_name = /var/run/dovecot/auth-client
       server_setid = $auth1

     dovecot_ntlm:
       driver = NTLM
       server_name = /var/run/dovecot/auth-client
       server_setid = $auth1


Version 4.63
------------

1. There is a new Boolean option called filter_prepend_home for the redirect
   router.

2. There is a new acl, set by acl_not_smtp_start, which is run right at the
   start of receiving a non-SMTP message, before any of the message has been
   read.

3. When an SMTP error message is specified in a "message" modifier in an ACL,
   or in a :fail: or :defer: message in a redirect router, Exim now checks the
   start of the message for an SMTP error code.

4. There is a new parameter for LDAP lookups called "referrals", which takes
   one of the settings "follow" (the default) or "nofollow".

5. Version 20070721.2 of exipick now included, offering these new options:
    --reverse
        After all other sorting options have bee processed, reverse order
        before displaying messages (-R is synonym).
    --random
        Randomize order of matching messages before displaying.
    --size
        Instead of displaying the matching messages, display the sum
        of their sizes.
    --sort <variable>[,<variable>...]
        Before displaying matching messages, sort the messages according to
        each messages value for each variable.
    --not
        Negate the value for every test (returns inverse output from the
        same criteria without --not).


Version 4.62
------------

1. The ${readsocket expansion item now supports Internet domain sockets as well
   as Unix domain sockets. If the first argument begins "inet:", it must be of
   the form "inet:host:port". The port is mandatory; it may be a number or the
   name of a TCP port in /etc/services. The host may be a name, or it may be an
   IP address. An ip address may optionally be enclosed in square brackets.
   This is best for IPv6 addresses. For example:

     ${readsocket{inet:[::1]:1234}{<request data>}...

   Only a single host name may be given, but if looking it up yield more than
   one IP address, they are each tried in turn until a connection is made. Once
   a connection has been made, the behaviour is as for ${readsocket with a Unix
   domain socket.

2. If a redirect router sets up file or pipe deliveries for more than one
   incoming address, and the relevant transport has batch_max set greater than
   one, a batch delivery now occurs.

3. The appendfile transport has a new option called maildirfolder_create_regex.
   Its value is a regular expression. For a maildir delivery, this is matched
   against the maildir directory; if it matches, Exim ensures that a
   maildirfolder file is created alongside the new, cur, and tmp directories.


Version 4.61
------------

The documentation is up-to-date for the 4.61 release. Major new features since
the 4.60 release are:

. An option called disable_ipv6, to disable the use of IPv6 completely.

. An increase in the number of ACL variables to 20 of each type.

. A change to use $auth1, $auth2, and $auth3 in authenticators instead of $1,
  $2, $3, (though those are still set) because the numeric variables get used
  for other things in complicated expansions.

. The default for rfc1413_query_timeout has been changed from 30s to 5s.

. It is possible to use setclassresources() on some BSD OS to control the
  resources used in pipe deliveries.

. A new ACL modifier called add_header, which can be used with any verb.

. More errors are detectable in retry rules.

There are a number of other additions too.


Version 4.60
------------

The documentation is up-to-date for the 4.60 release. Major new features since
the 4.50 release are:

. Support for SQLite.

. Support for IGNOREQUOTA in LMTP.

. Extensions to the "submission mode" features.

. Support for Client SMTP Authorization (CSA).

. Support for ratelimiting hosts and users.

. New expansion items to help with the BATV "prvs" scheme.

. A "match_ip" condition, that matches an IP address against a list.

There are many more minor changes.

****
